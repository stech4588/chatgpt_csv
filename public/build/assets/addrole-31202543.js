import{_ as x,r as u,o as n,c as d,a as s,w as A,b as _,v as p,n as v,d as a,F as b,j as k,t as l,k as C}from"./app-8617d8f9.js";const S={inject:["authStore"],name:"Add",data(){return{form:new this.$form({name:"",description:"",permission_id:[]}),permissions:{},categories:[],addedSuccessful:!1,loading:!0,roleAdd:!1}},async mounted(){if(this.authStore.user===null)this.loading=!0;else{const i=["roleAdd"],e=await checkPermissions(i);i.forEach(r=>{e[r]&&(this[r]=!0,r==="roleAdd"&&(this.loading=!1))});try{const r=await this.$axios.get("/api/permission?groupBy=true");this.permissions=r.data.data,this.categories=Object.keys(this.permissions)}catch(r){handleError(r,this.$toast)}}},methods:{async addInRole(){try{const{data:i}=await this.form.post("/api/role");i.status===200&&(this.$toast.success(i.message,{position:"top-right",duration:3e3}),this.$router.push("/role"))}catch(i){handleError(i,this.$toast)}}}},R={key:0},U={key:0},V=s("h1",null," Add Role ",-1),z={class:"row"},B={class:"col-lg-12 m-auto"},E={class:"mb-3 row"},j=s("label",{class:"col-md-3 col-form-label text-md-end"},l("Name"),-1),I={class:"col-md-7"},L={class:"mb-3 row"},M=s("label",{class:"col-md-3 col-form-label text-md-end"},l("description"),-1),N={class:"col-md-7"},q={class:"mb-3 row"},D=s("h5",{class:"col-md-3 text-md-end"},l("Select Permissions"),-1),F={class:"col-md-9"},K={class:"row"},P={class:"text-capitalize"},T={class:"form-check"},O=["id","value"],G=["for"],H={class:"mb-3 row"},J={class:"col-md-7 offset-md-3 d-flex"},Q=["disabled"],W={key:1},X={key:1};function Y(i,e,r,Z,o,h){const m=u("has-error"),g=u("Unauthorized"),w=u("Loader");return o.loading===!1?(n(),d("div",R,[o.roleAdd===!0?(n(),d("div",U,[V,s("div",z,[s("div",B,[s("form",{onSubmit:e[4]||(e[4]=A((...t)=>h.addInRole&&h.addInRole(...t),["prevent"])),onKeydown:e[5]||(e[5]=t=>o.form.onKeydown(t))},[s("div",E,[j,s("div",I,[_(s("input",{"onUpdate:modelValue":e[0]||(e[0]=t=>o.form.name=t),class:v([{"is-invalid":o.form.errors.has("name")},"form-control"]),type:"text",name:"name",required:""},null,2),[[p,o.form.name]]),a(m,{form:o.form,field:"name"},null,8,["form"])])]),s("div",L,[M,s("div",N,[_(s("input",{"onUpdate:modelValue":e[1]||(e[1]=t=>o.form.description=t),class:v([{"is-invalid":o.form.errors.has("description")},"form-control"]),type:"text",name:"description",required:""},null,2),[[p,o.form.description]]),a(m,{form:o.form,field:"description"},null,8,["form"])])]),s("div",q,[D,s("div",F,[s("div",K,[(n(!0),d(b,null,k(o.permissions,(t,f)=>(n(),d("div",{key:f,class:"col-md-4 mb-2"},[s("h5",P,l(f),1),(n(!0),d(b,null,k(t,c=>(n(),d("div",{key:c.id},[s("div",T,[_(s("input",{id:"permission_"+c.id,"onUpdate:modelValue":e[2]||(e[2]=y=>o.form.permission_id=y),class:"form-check-input",type:"checkbox",value:c.id},null,8,O),[[C,o.form.permission_id]]),s("label",{class:"form-check-label",for:"permission_"+c.id},l(c.name),9,G)])]))),128))]))),128))]),a(m,{form:o.form,field:"permission_id"},null,8,["form"])])]),s("div",H,[s("div",J,[s("button",{class:"btn grey-bg",disabled:o.form.busy},l("Add"),8,Q),s("button",{onClick:e[3]||(e[3]=t=>i.$router.push({name:"role"})),class:"btn black-bg ms-1"},l("Cancel"))])])],32)])])])):(n(),d("div",W,[a(g)]))])):(n(),d("div",X,[a(w)]))}const ss=x(S,[["render",Y]]);export{ss as default};
