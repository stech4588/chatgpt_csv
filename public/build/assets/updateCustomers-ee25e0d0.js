import{_ as b,r as u,o as i,c as a,a as o,t as n,w as y,b as m,v as f,n as h,d,l as w,F as U,j as g}from"./app-8617d8f9.js";const k={name:"Update",inject:["authStore"],data(){return{form:new this.$form({name:"",email:"",phone_no:"",role_id:0}),customersUpdate:!1,loading:!0,roles:[]}},async mounted(){if(this.authStore.user===null)this.loading=!1;else try{const r=["customersUpdate"],s=await checkPermissions(r);r.forEach(l=>{s[l]&&(this[l]=!0,l==="customersUpdate"&&(this.loading=!1))}),await this.$axios.get(`/api/customer/${this.$route.params.id}/edit`).then(l=>{this.form.name=l.data.data[0].name,this.form.email=l.data.data[0].email,this.form.phone_no=l.data.data[0].phone_no,this.form.role_id=l.data.data[0].role_id,this.roles=l.data.data[1]})}catch(r){handleError(r,this.$toast)}},methods:{async updateCustomers(){try{const{data:r}=await this.form.post(`/api/updateCustomer/${this.$route.params.id}`);r.status===200&&(this.$toast.success("Customers updated successfully.",{position:"top-right",duration:3e3}),this.$router.push("/customers"))}catch(r){handleError(r,this.$toast)}}}},x={key:0},C={key:0},V={class:"row"},E={class:"col-lg-12 m-auto"},S={class:"mb-3 row"},q=o("label",{class:"col-md-3 col-form-label text-md-end"},n("Name"),-1),z={class:"col-md-7"},B={class:"mb-3 row"},L=o("label",{class:"col-md-3 col-form-label text-md-end"},n("Email"),-1),M={class:"col-md-7"},N={class:"mb-3 row"},j={class:"col-md-3 col-form-label text-md-end"},D={class:"col-md-7"},F={class:"mb-3 row"},K=o("label",{class:"col-md-3 col-form-label text-md-end"},n("Role"),-1),P={class:"col-md-7"},R=["value"],T={class:"mb-3 row"},A={class:"col-md-7 offset-md-3 d-flex"},G=["disabled"],H={key:1},I={key:1};function J(r,s,l,O,e,_){const c=u("has-error"),p=u("Unauthorized"),v=u("Loader");return e.loading===!1?(i(),a("div",x,[e.customersUpdate===!0?(i(),a("div",C,[o("h1",null," Update User "+n(r.$route.params.id),1),o("div",V,[o("div",E,[o("form",{onSubmit:s[5]||(s[5]=y((...t)=>_.updateCustomers&&_.updateCustomers(...t),["prevent"])),onKeydown:s[6]||(s[6]=t=>e.form.onKeydown(t))},[o("div",S,[q,o("div",z,[m(o("input",{"onUpdate:modelValue":s[0]||(s[0]=t=>e.form.name=t),class:h([{"is-invalid":e.form.errors.has("name")},"form-control"]),type:"text",name:"name",required:""},null,2),[[f,e.form.name]]),d(c,{form:e.form,field:"name"},null,8,["form"])])]),o("div",B,[L,o("div",M,[m(o("input",{"onUpdate:modelValue":s[1]||(s[1]=t=>e.form.email=t),class:h([{"is-invalid":e.form.errors.has("email")},"form-control"]),type:"text",name:"email",required:""},null,2),[[f,e.form.email]]),d(c,{form:e.form,field:"email"},null,8,["form"])])]),o("div",N,[o("label",j,n("Phone no."),1),o("div",D,[m(o("input",{"onUpdate:modelValue":s[2]||(s[2]=t=>e.form.phone_no=t),class:h([{"is-invalid":e.form.errors.has("phone_no")},"form-control"]),type:"text",name:"phone_no",required:""},null,2),[[f,e.form.phone_no]]),d(c,{form:e.form,field:"phone_no"},null,8,["form"])])]),o("div",F,[K,o("div",P,[m(o("select",{"onUpdate:modelValue":s[3]||(s[3]=t=>e.form.role_id=t),class:"form-control",name:"role_id",required:""},[(i(!0),a(U,null,g(e.roles,t=>(i(),a("option",{key:t.id,value:t.id},n(t.name),9,R))),128))],512),[[w,e.form.role_id]])])]),o("div",T,[o("div",A,[o("button",{class:"btn grey-bg",disabled:e.form.busy},n("Update"),8,G),o("button",{onClick:s[4]||(s[4]=t=>r.$router.push({name:"customers"})),class:"btn black-bg ms-1"},n("Cancel"))])])],32)])])])):(i(),a("div",H,[d(p)]))])):(i(),a("div",I,[d(v)]))}const W=b(k,[["render",J]]);export{W as default};
