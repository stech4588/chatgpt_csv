import{_ as w,r as a,o as p,c as _,a as o,w as y,b as f,v as h,n as u,d as r,e as L,p as b,f as x}from"./app-8617d8f9.js";const k={name:"Login",inject:["authStore"],data(){return{form:new this.$form({email:"",password:""}),loading:!1}},async mounted(){this.$useHead({title:"login",description:"login page"})},methods:{async handleLogin(){this.loading=!0;try{const s=await this.LoginApiCall();this.authStore.login(s.data);const e=["normalUser","adminUser"],l=await checkPermissions(e);e.forEach(c=>{l[c]&&(this.loading=!1,this.$router.push("/dashboard"))}),this.$toast.success("User Login successfully",{position:"bottom-right",duration:3e3})}catch(s){this.loading=!1,handleError(s,this.$toast)}},async LoginApiCall(){try{return(await this.form.post("/api/login")).data}catch(s){throw s}}}},i=s=>(b("data-v-84296ae2"),s=s(),x(),s),S={key:0},C={class:"login-container"},I=i(()=>o("h2",{class:"text-center justify-content-center login-title"},"Login",-1)),U={class:"form-group my-3"},A=i(()=>o("label",{for:"email",class:"my-2"},"EMAIL",-1)),E={class:"form-group my-3"},V=i(()=>o("label",{for:"password",class:"my-2"},"PASSWORD",-1)),j=i(()=>o("div",{class:"login-btn"},[o("button",{type:"submit"},"Login")],-1)),B={class:"text-center justify-content-center mt-3"},M=i(()=>o("div",{class:"cur-point"},"Create account",-1)),D={key:1};function N(s,e,l,c,t,d){const m=a("has-error"),g=a("router-link"),v=a("Loader");return t.loading===!1?(p(),_("div",S,[o("div",C,[I,o("form",{onSubmit:e[2]||(e[2]=y((...n)=>d.handleLogin&&d.handleLogin(...n),["prevent"])),class:"login-form"},[o("div",U,[A,f(o("input",{"onUpdate:modelValue":e[0]||(e[0]=n=>t.form.email=n),class:u([{"is-invalid":t.form.errors.has("email")},"form-control"]),type:"text",id:"email",name:"email"},null,2),[[h,t.form.email]]),r(m,{form:t.form,field:"email"},null,8,["form"])]),o("div",E,[V,f(o("input",{"onUpdate:modelValue":e[1]||(e[1]=n=>t.form.password=n),class:u([{"is-invalid":t.form.errors.has("password")},"form-control"]),type:"password",id:"password",name:"password"},null,2),[[h,t.form.password]]),r(m,{form:t.form,field:"password"},null,8,["form"])]),j],32),o("div",B,[r(g,{to:"/register",class:"navbar-brand"},{default:L(()=>[M]),_:1})])])])):(p(),_("div",D,[r(v)]))}const R=w(k,[["render",N],["__scopeId","data-v-84296ae2"]]);export{R as default};
