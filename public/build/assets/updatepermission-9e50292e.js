import{_ as v,r as c,o as d,c as l,a as s,t as n,w as b,b as u,v as f,n as p,d as a}from"./app-8617d8f9.js";const g={inject:["authStore"],name:"Update",data(){return{form:new this.$form({name:"",description:"",category:""}),addedSuccessful:!1,roleId:0,loading:!0,permissionsUpdate:!1}},async mounted(){if(this.authStore.user===null)this.loading=!0;else try{const t=["permissionsUpdate"],e=await checkPermissions(t);t.forEach(r=>{e[r]&&(this[r]=!0,r==="permissionsUpdate"&&(this.loading=!1))}),await this.$axios.get(`/api/permission/${this.$route.params.id}`).then(r=>{this.form.name=r.data.data.name,this.form.description=r.data.data.description,this.form.category=r.data.data.category})}catch(t){handleError(t,this.$toast)}},methods:{async addInPermission(){try{const{data:t}=await this.form.put(`/api/permission/${this.$route.params.id}`);t.message==="Permission updated successfully."&&(this.$toast.success("Permission updated successfully.",{position:"top-right",duration:3e3}),this.$router.push("/permission"))}catch(t){handleError(t,this.$toast)}}}},w={key:0},U={key:0},k={class:"row"},x={class:"col-lg-10 m-auto"},P={class:"mb-3 row"},C=s("label",{class:"col-md-3 col-form-label text-md-end"},n("Name"),-1),S={class:"col-md-7"},V={class:"mb-3 row"},E=s("label",{class:"col-md-3 col-form-label text-md-end"},n("Description"),-1),I={class:"col-md-7"},q={class:"mb-3 row"},z=s("label",{class:"col-md-3 col-form-label text-md-end"},n("Category"),-1),B={class:"col-md-7"},D={class:"mb-3 row"},N={class:"col-md-7 offset-md-3 d-flex"},K=["disabled"],L={key:1},M={key:1};function T(t,e,r,j,o,h){const m=c("has-error"),_=c("Unauthorized"),y=c("Loader");return o.loading!==!0?(d(),l("div",w,[o.permissionsUpdate===!0?(d(),l("div",U,[s("h1",null," Update Permission "+n(t.$route.params.id),1),s("div",k,[s("div",x,[s("form",{onSubmit:e[4]||(e[4]=b((...i)=>h.addInPermission&&h.addInPermission(...i),["prevent"])),onKeydown:e[5]||(e[5]=i=>o.form.onKeydown(i))},[s("div",P,[C,s("div",S,[u(s("input",{"onUpdate:modelValue":e[0]||(e[0]=i=>o.form.name=i),class:p([{"is-invalid":o.form.errors.has("name")},"form-control"]),type:"text",name:"name",required:""},null,2),[[f,o.form.name]]),a(m,{form:o.form,field:"name"},null,8,["form"])])]),s("div",V,[E,s("div",I,[u(s("input",{"onUpdate:modelValue":e[1]||(e[1]=i=>o.form.description=i),class:p([{"is-invalid":o.form.errors.has("description")},"form-control"]),type:"text",name:"description",required:""},null,2),[[f,o.form.description]]),a(m,{form:o.form,field:"description"},null,8,["form"])])]),s("div",q,[z,s("div",B,[u(s("input",{"onUpdate:modelValue":e[2]||(e[2]=i=>o.form.category=i),class:p([{"is-invalid":o.form.errors.has("category")},"form-control"]),type:"text",name:"category",required:""},null,2),[[f,o.form.category]]),a(m,{form:o.form,field:"category"},null,8,["form"])])]),s("div",D,[s("div",N,[s("button",{class:"btn grey-bg",disabled:o.form.busy},n("Update"),8,K),s("button",{onClick:e[3]||(e[3]=i=>t.$router.push({name:"permission"})),class:"btn black-bg ms-1"},n("Cancel"))])])],32)])])])):(d(),l("div",L,[a(_)]))])):(d(),l("div",M,[a(y)]))}const A=v(g,[["render",T]]);export{A as default};
